<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-12-09 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20141209" />
    <meta http-equiv="Content-Language" content="en" />
    <title>TEAM Engine &#x2013; Installation</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://github.com/opengeospatial/teamengine" id="bannerLeft">
                                                                                                <img src="./images/te-logo-small.png"  alt="TEAM Engine"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://www.osgeo.org/incubator" id="bannerRight">
                                                                                                <img src="./images/OSGeo_incubation.png"  alt="OSGeo Incubator"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-12-09
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 4.0.6
                      </li>
                      
                
                    
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="https://github.com/opengeospatial/teamengine/issues" class="externalLink" title="Issues">
        Issues</a>
      </li>

  
    <li class="pull-right">
                      <a href="https://github.com/opengeospatial/teamengine/wiki" class="externalLink" title="Wiki">
        Wiki</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Getting Started</li>
                              
      <li>
  
                          <a href="index.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Installation</a>
          </li>
                
      <li>
  
                          <a href="users.html" title="User's Guide">
          <i class="none"></i>
        User's Guide</a>
            </li>
                
      <li>
  
                          <a href="testers.html" title="Tester's Guide">
          <i class="none"></i>
        Tester's Guide</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                  
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                              <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="changelog.html" title="Release Notes">
          <i class="none"></i>
        Release Notes</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            
  
  
    <h1>Installation</h1>

    
<div class="section">
<h2><a name="How_to_build"></a>How to build</h2>
    
<p>The source code is available from GitHub. The entire tree may be 
      <a class="externalLink" href="https://github.com/opengeospatial/teamengine" target="_blank">viewed in a 
    browser</a>, including the commit logs. Use a Git client to clone the repository 
    and checkout a branch or a tagged release as indicated below.</p>

    
<div>
<pre>
    $ git clone https://github.com/opengeospatial/teamengine.git
    $ git checkout 4.0.6
    </pre></div>

    
<p><a class="externalLink" href="http://maven.apache.org/" target="_blank">Apache Maven 3.0</a> is 
    required to build the teamengine code base, which consists of the following 
    modules:</p>

    
<ul>
      
<li>teamengine-core: Main CTL script processor</li>
      
<li>teamengine-resources: Includes shared resources such as stylesheets and schemas</li>
      
<li>teamengine-spi: Provides an extensibility framework and a REST-like API for test execution</li>
      
<li>teamengine-realm: A custom Tomcat user realm</li>
      
<li>teamengine-web: A web application for executing test suites and browsing test results</li>
      
<li>teamengine-console: A console application that provides a command-line interface for 
      executing test suites in Unix and Windows environments.</li>
    </ul>

    
<p>Simply run <tt>mvn package</tt> in the root project directory to generate 
    all build artifacts, or run <tt>mvn install</tt> to install them into the local Maven 
    repository. The main build artifacts are listed below.</p>

    
<dl>
      
<dt><b>teamengine-console-4.0.6-bin.[zip|tar.gz]</b></dt>
      
<dd>Archive containing the console application (command-line usage)</dd>
      
<dt><b>teamengine-console-4.0.6-base.[zip|tar.gz]</b></dt>
      
<dd>Archive containing the initial contents of the teamengine instance directory (TE_BASE)</dd>
      
<dt><b>teamengine.war</b></dt>
      
<dd>The JEE (Servlet) web application</dd>
      
<dt><b>teamengine-common-libs.[zip|tar.gz]</b></dt>
      
<dd>Archive containing common runtime dependencies (e.g. JAX-RS 1.1, Apache Derby)</dd>
    </dl>

    
<p>Alternatively, build the teamengine-web module and activate the <tt>ogc.cite</tt> 
    profile when doing so; this will automatically add all supporting libraries to the WEB-INF/lib 
    directory in the WAR file. Specify the desired version of the ets-resources project in the 
    user-specific Maven settings file located at <tt>${user.home}/.m2/settings.xml</tt>.
    See the <a class="externalLink" href="https://github.com/opengeospatial/ets-resources" target="_blank">ets-resources 
    project at GitHub</a> to determine the latest version number (this is denoted by YY.MM.DD in 
    the listing below).</p>

    
<div>
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!-- ${user.home}/.m2/settings.xml --&gt;
&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.1.0&quot; 
  &lt;!-- other elements omitted --&gt;
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;ogc.cite&lt;/id&gt;
      &lt;!-- Activate profile by default or only when desired using the -P option
      &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
      &lt;/activation&gt;
      --&gt;
      &lt;properties&gt;
        &lt;ets-resources-version&gt;YY.MM.DD&lt;/ets-resources-version&gt;
      &lt;/properties&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
&lt;/settings&gt;</pre></div>

    
<p>A simpler alternative is to activate the profile and specify the property 
    using only command-line options:</p> 
    
<div>
<pre>mvn package -P ogc.cite -Dets-resources-version=YY.MM.DD</pre></div> 

    
<p>The site documentation can be generated by simply executing the 'mvn site' phase 
    against the top-level POM. An aggregrate PDF document is also created and placed in 
    the target/pdf directory.</p>

    </div>
<div class="section">
<h2><a name="Setting_up_an_instance_directory"></a>Setting up an instance directory</h2>
    
<p>The value of the <tt>TE_BASE</tt> system property or environment variable 
    specifies the location of the instance directory that contains several essential 
    sub-directories. Create the TE_BASE directory (e.g. /srv/teamengine) and unpack 
    the contents of the teamengine-console-4.0.6-base archive into this 
    location; make sure that users (including the Tomcat user) have write access. 
    The structure of the TE_BASE directory is shown below.</p>

    
<div>
<pre>
TE_BASE
  |-- config.xml        # main configuration file
  |-- resources/        # shared test suite resources
  |-- scripts/          # CTL test scripts
  |-- work/             # teamengine work directory
  +-- users/
     |-- {user1}/       # user account details and test run results
     |-- {user2}/
     +-- ...
    </pre></div>

    
<p><img src="./images/info-16px.png" alt="" /> <b>Note:</b> Some OGC test suites use 
    an embedded Apache Derby database containing the <a class="externalLink" href="http://www.epsg.org/Geodetic.html" target="_blank">EPSG geodetic parameters</a>. Create a Derby system directory to contain this 
    database (e.g. DERBY_DATA, at /srv/derby). The database will be automatically created if 
    necessary.</p>

    
<p>CTL test scripts are placed in the TE_BASE/scripts directory and the TE_BASE/config.xml 
    file is updated accordingly to register them. As a convenience, the shell script <tt>setup-tebase</tt> 
    is provided as part of the <a class="externalLink" href="https://github.com/opengeospatial/ets-resources" target="_blank">ets-resources</a> project; it may be run to initialize the instance 
    directory with a set of test suites specified in a CSV file. Note that in order to run 
    the script Maven and Git must be installed and available on the system path.</p>

    
<p>The location of a CSV file is passed as the first argument to the script. Each line in 
    the file should contain two fields: a Git repository URL, and a tag name.
    </p>
    
<div>
<pre>
https://github.com/opengeospatial/ets-kml22.git,2.2-r11
https://github.com/opengeospatial/ets-gml32.git,3.2.1-r18
https://github.com/opengeospatial/ets-wfs20.git,2.0-r18
https://github.com/opengeospatial/ets-wfs11.git,r21
...</pre></div>

    
<p>Running the script will populate the TE_BASE/scripts directory with the listed 
    test suites, add all required dependencies to TE_BASE/resources/lib (for CLI usage), 
    and replace the teamengine configuration file at TE_BASE/config.xml (an existing 
    config file will be renamed as config-PREV.xml). See the <a class="externalLink" href="https://github.com/opengeospatial/ets-resources" target="_blank">project README</a> for 
    details.</p>

    
<p>
    A new instance will contain an entry for a sample test script (&quot;XML Note&quot;). To 
    enable another test suite an entry for it must appear in the configuration file; 
    simply insert the &lt;standard&gt; element into the file under the matching 
    organization (name). The following listing includes a sample entry.
    </p>

    
<div>
<pre>
&lt;standard&gt;
  &lt;name&gt;Web Map Tile Service (WMTS)&lt;/name&gt;
  &lt;version&gt;
    &lt;name&gt;1.0.0&lt;/name&gt;
    &lt;suite&gt;
      &lt;namespace-uri&gt;http://www.opengis.net/wmts/1.0&lt;/namespace-uri&gt;
      &lt;prefix&gt;wmts&lt;/prefix&gt;
      &lt;local-name&gt;server.suite.base&lt;/local-name&gt;
      &lt;title&gt;WMTS 1.0 Conformance Test Suite&lt;/title&gt;
      &lt;description&gt;
      Checks WMTS implementations for conformance to OGC 07-057r7.
      &lt;/description&gt;
    &lt;/suite&gt;
    &lt;revision&gt;
      &lt;name&gt;r1&lt;/name&gt;
      &lt;sources&gt;
        &lt;source&gt;wmts/1.0.0/ctl&lt;/source&gt;
      &lt;/sources&gt;
      &lt;resources&gt;wmts/1.0.0/resources&lt;/resources&gt;
      &lt;webdir&gt;wmts/1.0.0/web&lt;/webdir&gt;
      &lt;profile&gt;
        &lt;namespace-uri&gt;http://www.opengis.net/wmts/1.0&lt;/namespace-uri&gt;
        &lt;prefix&gt;wmts&lt;/prefix&gt;
        &lt;local-name&gt;server.profile.kvp.get&lt;/local-name&gt;
        &lt;title&gt;GET binding&lt;/title&gt;
      &lt;/profile&gt;
      &lt;profile&gt;
        &lt;namespace-uri&gt;http://www.opengis.net/wmts/1.0&lt;/namespace-uri&gt;
        &lt;prefix&gt;wmts&lt;/prefix&gt;
        &lt;local-name&gt;server.profile.kvp.post&lt;/local-name&gt;
        &lt;title&gt;POST/KVP binding&lt;/title&gt;
      &lt;/profile&gt;
    &lt;/revision&gt;
  &lt;/version&gt;
&lt;/standard&gt;
    </pre></div>

    </div>
<div class="section">
<h2><a name="Deploying_the_web_application"></a>Deploying the web application</h2>

    
<div class="section">
<h3><a name="System_requirements"></a>System requirements</h3>
    
<p>
      </p>
<ul>
        
<li>Java runtime: Oracle JDK 7 - <a class="externalLink" href="http://www.oracle.com/technetwork/java/javase/downloads/">latest 
        JDK release</a></li>
        
<li>Servlet container: Apache Tomcat 7.0 - <a class="externalLink" href="http://tomcat.apache.org/download-70.cgi">latest 
        Tomcat release</a></li>
      </ul>
    

    </div>
<div class="section">
<h3><a name="Create_a_dedicated_Tomcat_instance"></a>Create a dedicated Tomcat instance</h3>

    
<p>Apache Tomcat 7.0 is a supported servlet container. It is <b>strongly</b> 
    recommended that a dedicated Tomcat instance be created to host the teamengine application. 
    That is, keep the instance-specific data--referred to as CATALINA_BASE in the Tomcat 
    documentation--separate from the Tomcat software installation (CATALINA_HOME). Create 
    it as outlined below for the applicable operating system.</p>

    
<p>Create a CATALINA_BASE directory (Windows):</p>    
    
<div>
<pre>
&gt; mkdir base-1 &amp; cd base-1
&gt; xcopy %CATALINA_HOME%\conf conf\
&gt; mkdir lib logs temp webapps work
</pre></div>


<p>Create a CATALINA_BASE directory (GNU/Linux):</p>

<div>
<pre>
$ sudo mkdir -p /srv/tomcat/base-1; cd /srv/tomcat/base-1
$ sudo cp -r $CATALINA_HOME/conf .
$ sudo mkdir lib logs temp webapps work
</pre></div>


<p>The recommended JVM options for the Tomcat instance are shown below. Note that the 
maximum memory heap size (<tt>-Xmx</tt>) may need to be increased as the number of 
concurrent users increases.</p>


<p>
  <tt>CATALINA_OPTS=&quot;-server -Xmx1024m -XX:MaxPermSize=128m -DTE_BASE=$TE_BASE -Dderby.system.home=$DERBY_DATA&quot;</tt>
</p>


<p>Unpack the contents of the teamengine-common-libs archive into the CATALINA_BASE/lib 
directory. Deploy the <tt>teamengine.war</tt> component by either copying it into the 
CATALINA_BASE/webapps directory or using the Tomcat <i>Manager</i> application. Start 
the Tomcat instance.</p>


<p>The URIs listed below provide starting points for discovering and executing test suites. 
Modify the path if the name of the WAR file (and hence the context path) has been changed 
from the default value &quot;teamengine&quot;.</p>


<ul>
  
<li>/teamengine - Home page for selecting and running CTL test suites</li>
  
<li>/teamengine/rest/suites - Presents a listing of available (TestNG) test suites, 
  with links to test suite documentation</li>
</ul>

</div>
<div class="section">
<h3><a name="Customizing_the_welcome_page"></a>Customizing the welcome page</h3>

<p>Several elements of the welcome page may be changed if desired: the logo in 
the header, the main text, and the content in the footer. The files located in the 
TE_BASE/resources/site directory can be modified to provide site-specific content 
(see Table 1).</p>


<table border="0" class="table table-striped"><caption>Table 1 - Site content</caption>
  
  <thead>
    
<tr class="a">
      
<th>File</th>
      
<th>Content</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>site/logo.png</td>
      
<td>The logo that appears in the header (at top left). The size of the 
          default image is 127x58 px.</td>
    </tr>
    
<tr class="a">
      
<td>site/welcome.txt</td>
      
<td>The main text.</td>
    </tr>
    
<tr class="b">
      
<td>site/footer.txt</td>
      
<td>Footer content.</td>
    </tr>
  </tbody>
</table>


<p>An alias path must be added to the <a class="externalLink" href="https://tomcat.apache.org/tomcat-7.0-doc/config/context.html" target="_blank">web application context</a> in order to make the content visible. Append the <tt>/site</tt> 
alias to the aliases attribute value in the META-INF/context.xml file as shown below. Reload the application 
(or restart Tomcat) to enable the new alias.</p>

<div>
<pre>&lt;Context aliases=&quot;...,/site=${TE_BASE}/resources/site&quot;&gt;</pre></div>

</div></div>

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2014
                        <a href="http://www.opengeospatial.org/">Open Geospatial Consortium</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
